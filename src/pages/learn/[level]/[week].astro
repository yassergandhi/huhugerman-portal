---
import Layout from '@layouts/Layout.astro';
import GuidedActivity from '@components/GuidedActivity.astro';

const { level, week } = Astro.params;

// cargar todas las sesiones
const lessons = import.meta.glob('@lib/courses/**/sessions/*.js');

// construir path exacto
const lessonPath = `/src/lib/courses/${level}/sessions/${week}.js`;

const lessonModule = lessons[lessonPath];

if (!lessonModule) {
  throw new Error(`Lesson not found: ${lessonPath}`);
}

const lesson = (await lessonModule()).default;
---

<Layout title={lesson.title}>
  <GuidedActivity lesson={lesson} />
</Layout>
